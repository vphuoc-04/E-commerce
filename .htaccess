<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /webbanhang/

    # -------------------------------
    # HANDLER ROUTES
    # -------------------------------
    # /handlers/auth.php?action=register -> handlers/auth.php?action=register
    RewriteRule ^handlers/([a-zA-Z0-9_-]+)\.php$ handlers/$1.php [L,QSA]

    # -------------------------------
    # ADMIN ROUTES
    # -------------------------------
    # /admin/users  -> index.php?page=users
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^admin/([a-zA-Z0-9_-]+)$ index.php?page=$1 [L,QSA]

    # /admin/users?page=2 -> index.php?page=users&page=2
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^admin/([a-zA-Z0-9_-]+)\?page=([0-9]+)$ index.php?page=$1&page=$2 [L,QSA]

    # -------------------------------
    # CLIENT ROUTES
    # -------------------------------
    # /products        -> index.php?client=products
    # /cart            -> index.php?client=cart
    # /checkout        -> index.php?client=checkout
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^([a-zA-Z0-9_-]+)$ index.php?client=$1 [L,QSA]

    # home?page=2 -> index.php?client=users&page=2
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^/([a-zA-Z0-9_-]+)\?page=([0-9]+)$ index.php?client=$1&page=$2 [L,QSA]

    # -------------------------------
    # Nếu file hoặc thư mục thật thì giữ nguyên
    # -------------------------------
    RewriteCond %{REQUEST_FILENAME} -f [OR]
    RewriteCond %{REQUEST_FILENAME} -d
    RewriteRule . - [L]
</IfModule>
